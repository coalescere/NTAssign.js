"use strict";function getRBMParameters(e,r){function t(e,r){this.a=e,this.b=r}switch(r){case 0:switch(e){case 0:case 1:return new t(204,27);case 2:return new t(200,26);default:return new t(228,0)}case 1:return new t(235.9,5.5);case 2:return new t(217.8,15.7);case 3:return new t(227,.3);case 4:return new t(223.5,12.5);case 5:return new t(218,18.3);default:throw new Error("invalid type")}}function wRBM2Dt(e,r,t){var a=getRBMParameters(r,t);return a.a/(e-a.b)}function dt2RBM(e,r,t){var a=getRBMParameters(r,t);return a.a/e+a.b}function getEnergyFromCos3Theta(e,r,t,a,l){var n=void 0;if(isMetal(t)&&l>0)throw new Error("mod should be in accordance with p");if(a<=2){if(t>=9)throw new Error("higher than S66 not available");var s=-param[t][0]/(e*e)+2*param[t][1]/(e*e*e);if(s>0)throw new Error("dt");n=isMetal(t)?param[t][0]/e-param[t][1]/(e*e)+param[t][2]/(e*e)*r*(2*l+1):param[t][0]/e-param[t][1]/(e*e)+param[t][2]/(e*e)*r*(t%3===l%2?-1:1),n-=1===a?.04:2===a?.1:0}else if(3===a){if(t>=6)throw new Error("higher than M22 not available for Super-Growth");var i=1.074,o=.467,p=.812,u=function(a){return i*(t+1)/e*(1+o*Math.log10(p/((t+1)/e)))+betap[t][a]/(e*e)*r+(t>2?.059*(t+1)/e:0)};n=u(isMetal(t)?l+1:l-1)}else{if(4!==a&&5!==a)throw new Error("invalid type");if(0===t)n=1/(.127+.8606*e)+(1===l?.04575:-.08802)/(e*e)*r;else{if(1!==t)throw new Error("only S11 and S22 are available for SDS-dispersed or ssDNA dispersed");n=1/(.1174+.4644*e)+(1===l?-.1829:.1705)/(e*e)*r}n-=5===a?.02:0}return n}function getCos3Theta(e,r,t,a){var l=[-1,-1];if(a<=2){if(t>=9)throw new Error("higher than S66 not available");e+=1===a?.04:2===a?.1:0,isMetal(t)?(l[0]=(param[t][0]/r-param[t][1]/(r*r)-e)/param[t][2]*(r*r),l[1]=-(param[t][0]/r-param[t][1]/(r*r)-e)/param[t][2]*(r*r)):(l[0]=-(param[t][0]/r-param[t][1]/(r*r)-e)/param[t][2]*(r*r)*(t%3===1?-1:1),l[1]=-(param[t][0]/r-param[t][1]/(r*r)-e)/param[t][2]*(r*r)*(t%3===0?-1:1))}else if(3===a){if(t>=6)throw new Error("higher than M22 not available for Super-Growth");var n=1.074,s=.467,i=.812,o=function(a){return(e-n*(t+1)/r*(1+s*Math.log10(i/((t+1)/r)))-(t>2?.059*(t+1)/r:0))/betap[t][a]*(r*r)};l[0]=o(0),l[1]=o(1)}else{if(4!==a&&5!==a)throw new Error("invalid type");if(e+=5===a?.02:0,0===t)l[0]=(e-1/(.127+.8606*r))/.04575*(r*r),l[1]=(e-1/(.127+.8606*r))/-.08802*(r*r);else{if(1!==t)throw new Error("only S11 and S22 are available for SDS-disp. or ssDNA disp.");l[0]=(e-1/(.1174+.4644*r))/-.1829*(r*r),l[1]=(e-1/(.1174+.4644*r))/.1705*(r*r)}}return l[0]=l[0].toFixed(4),l[1]=l[0].toFixed(4),(l[0]>1||l[0]<0)&&(l[0]=-1),(l[1]>1||l[1]<0)&&(l[1]=-1),l}function getAverage(e,r,t,a){var l=wRBM2Dt(r,t,a);if(isMetal(t+1))throw new Error("p should be the smaller one");if(!(a<=2)){if(3===a){var n=1.074,s=.467,i=.812,o=function(e){return n*(e+1)/l*(1+s*Math.log10(i/((e+1)/l)))+(e>2?.059*(e+1)/l:0)};if(isMetal(t)){var p=e*l*l/(betap[t][1]-betap[t][0]);return p<0||p>1?null:(getEnergyFromCos3Theta(l,p,t,a,-1)+getEnergyFromCos3Theta(l,p,t,a,0))/2}var u=t+1,c=1;if(t>=6)throw new Error("higher than M22 not available for Super-Growth");var h=(e+o(t)-o(u))*l*l/(betap[u][c-1]-betap[t][c-1]);return(h<0||h>1)&&(c=2,h=(e+o(t)-o(u))*l*l/(betap[u][c-1]-betap[t][c-1])),h<0||h>1?null:(getEnergyFromCos3Theta(l,h,u,a,c)+getEnergyFromCos3Theta(l,h,t,a,c))/2}if(4===a||5===a){if(0!==t)throw new Error("only S11 and S22 are available for SDS-disp. or ssDNA disp.");var m=1,d=(e-(1/(.1174+.4644*l)-1/(.127+.8606*l)))*l*l/(-.1829-.04575);return(d>1||d<0)&&(m=2,d=(e-(1/(.1174+.4644*l)-1/(.127+.8606*l)))*l*l/.25852),d>1||d<0?null:(getEnergyFromCos3Theta(l,d,1,a,m)+getEnergyFromCos3Theta(l,d,0,a,m))/2}throw new Error("invalid type")}if(t>=9)throw new Error("higher than S66 not available");if(isMetal(t)){var f=l*l*e/2*param[t][2];if(f<0||f>1)return null;try{return(getEnergyFromCos3Theta(l,f,t,a,-1)+getEnergyFromCos3Theta(l,f,t,a,0))/2}catch(g){if("dt"===g.message)return null;throw g}}else{var v=t+1,b=function(e){return param[v][e]-param[t][e]},y=1,M=(e*l*l-b(0)*l+b(1))/(param[v][2]*(v%3===y%2?-1:1)-param[t][2]*(t%3===y%2?-1:1));if(M<0&&(y=2,M=-M),M>1)return null;try{return(getEnergyFromCos3Theta(l,M,v,a,y)+getEnergyFromCos3Theta(l,M,t,a,y))/2}catch(g){if("dt"===g.message)return null;throw g}}}function getList(e,r){var t=[],a=5,l=50,n=90;if(isMetal(e))for(var s=a;s<l;s++)for(var i=0;i<=s&&!(2*s+i>n);i++)try{if(isMetal(s,i)){var o=getEnergy(Dt(s,i,r),Theta(s,i),e,r,-1),p=getEnergy(Dt(s,i,r),Theta(s,i),e,r,0);t.push([s,i,(p+o)/2,p-o])}}catch(u){if("dt"!==u.message)throw u}else{if(isMetal(e+1))throw new Error("p should be the smaller one, e.g. S11 rather than S22");for(var c=a;c<l;c++)for(var h=0;h<=c&&!(2*c+h>n);h++)try{if(!isMetal(c,h)){var m=getEnergy(Dt(c,h,r),Theta(c,h),e,r,Mod(c,h)),d=getEnergy(Dt(c,h,r),Theta(c,h),e+1,r,Mod(c,h));t.push([c,h,(d+m)/2,d-m])}}catch(u){if("dt"!==u.message)throw u}}return t}function getRBMArray(e,r){var t={rbmLabel:[],rbm:[]},a=60,l=70,n=350;if(!isMetal(e)&&isMetal(e+1))throw new Error("p should be the smaller one, e.g. S11 rather than S22");for(var s=l;s<=n;s+=10){var i=wRBM2Dt(s,e,r),o=[];try{if(isMetal(e)){var p=getEnergyFromCos3Theta(i,a,e,r,0),u=getEnergyFromCos3Theta(i,a,e,r,-1);o.push([(p+u)/2,p-u]),p=getEnergyFromCos3Theta(i,-a,e,r,0),u=getEnergyFromCos3Theta(i,-a,e,r,-1),o.push([(p+u)/2,p-u]),t.rbmLabel.push(s),t.rbm.push(o)}else{var c=getEnergyFromCos3Theta(i,a,e+1,r,1),h=getEnergyFromCos3Theta(i,a,e,r,1);o.push([(c+h)/2,c-h]),c=getEnergyFromCos3Theta(i,0,e+1,r,2),h=getEnergyFromCos3Theta(i,0,e,r,2),o.push([(c+h)/2,c-h]),c=getEnergyFromCos3Theta(i,a,e+1,r,2),h=getEnergyFromCos3Theta(i,a,e,r,2),o.push([(c+h)/2,c-h]),t.rbmLabel.push(s),t.rbm.push(o)}}catch(m){if("dt"===m.message)break;throw m}}return t}function getPlotParams(e){var r=function(e){return e.split(".")[1].length};if(""===e.val1&&""===e.val2)throw new Error("Unauthorized Access");if(""===e.val1||""===e.val2){if(""===e.rbm)throw new Error("Unauthorized Access");return e.uncertainty=2/Math.pow(10,r(""===e.val1?e.val2:e.val1)),E1R1(e)}return e.uncertainty=2/Math.pow(10,Math.min(r(e.val1),r(e.val2))),E2(e)}function E1R1(e){var r=""===e.val1?e.p2:e.p1,t=e.type,a=p1ToP[r],l=parseFloat(""===e.val1?e.val2:e.val1),n=parseFloat(e.rbm),s=wRBM2Dt(n,a,t),i=getCos3Theta(l,s,a,t),o="",p=function(){return Assign({bluePoint:null,point:[l,.23],pLesser:pToLesser[a],type:t,pointType:"none",p1Lesser:p1ToLesser(r),resultString:o})};if(i[0]===-1&&i[1]===-1)return o+="Invalid input: out of range.",p();var u=void 0,c=void 0;if(isMetal(a)){if(r%4-3!==(i[0]===-1?0:-1))return o+="Invalid input: out of range. You may have mistakenly put "+p1Arr[r]+" instead of "+p1Arr[r+5-r%4*2]+".",p();u=a,c=i[0]===-1?-1:0}else u=isMetal(a+1)?a-1:a+1,c=i[0]===-1?2:1;var h=void 0;try{h=getEnergyFromCos3Theta(s,i[0]===-1?i[1]:i[0],u,t,c)}catch(m){if("dt"===m.message)return o+="Invalid input: out of range, diameter too small.",p();throw m}if(isMetal(a)&&c===-1||!isMetal(a)&&a>u){var d=[u,a];a=d[0],u=d[1];var f=[h,l];l=f[0],h=f[1]}var g=(l+h)/2,v=h-l;return Assign({bluePoint:null,point:[g,v],pLesser:a,type:t,pointType:"green",p1Lesser:p1ToLesser(r),resultString:o},c)}function E2(e){var r="",t=e.p1,a=e.p2,l=e.type,n=parseFloat(e.val1),s=parseFloat(e.val2),i=p1ToP[t],o=p1ToP[a],p=e.rbm;if(t>a){var u=[o,i];i=u[0],o=u[1];var c=[s,n];n=c[0],s=c[1];var h=[a,t];t=h[0],a=h[1]}if(isMetal(o)!==isMetal(i))throw new Error("invalid form submission");if(a-t===1){var m=null;if(""!==p){var d=getAverage(s-n,parseFloat(e.rbm),i,l);null!==d?m=[d,s-n]:r+="Invalid input: out of range. Please check your input RBM value. Only transition energies are processed. <br/ >"}return Assign({point:[(n+s)/2,s-n],pLesser:i,type:l,pointType:"red",bluePoint:m,p1Lesser:t,resultString:r})}}function Assign(e){function r(e,r,t,a){n=e,s=r,i=t,o=a}function t(){e.result=d.orderBy(u).toArray();for(var r=0;r<e.result.length;r++)e.resultString+="<b>("+Math.round(e.result[r][0])+","+Math.round(e.result[r][1])+")</b>"+(r!==e.result.length-1?", ":"");e.resultString+="</span>"}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,l=e.uncertainty,n=-1,s=-1,i=-1,o=-1,p=function(e,r,t,a){return Math.sqrt((e-t)*(e-t)+(r-a)*(r-a)*25)},u=function(r){return p(r[2],r[3],e.point[0],e.point[1])},c=.6,h=isMetal(e.pLesser)?.6:e.point[1]+.6,m=isMetal(e.pLesser)?-.1:e.point[1]-.6;e.all=Enumerable.from(getList(e.pLesser,e.type)).where(function(r){return r[2]>=e.point[0]-c&&r[2]<=e.point[0]+c&&r[3]<=h&&r[3]>=m}).toArray();var d=Enumerable.from(e.all).where(function(r){return(a===-1||isMetal(e.pLesser)||a===Mod(r[0],r[1]))&&e.point[0]-r[2]>=n&&e.point[0]-r[2]<=s&&e.point[1]-r[3]>=i&&e.point[1]-r[3]<=o});r(-l,l,-l,l);var f=d.toArray();if("none"===e.pointType)return e.ar=AssignResult.error,e.result=[],e;if(l>.2)return e.resultString="Input uncertainty too large. Please give more significant figures.",e.ar=AssignResult.error,e.result=[],e;if("red"===e.pointType){if(null!=e.bluePoint?e.bluePoint[0]-e.point[0]<.02?r(-.008,.008,-.015,.015):r(-.03,-.005,-.015,.015):r(-.02,.008,-.015,.015),1===d.count()&&f.length<=1)return e.ar=AssignResult.accurate,e.resultString+='The assignment result is:<br /><span style="font-size: 28px;">',t(),e;r(-.04,.0126,-.03,.03)}else r(-.07,.07,-.04,.04);if(d.union(f),d.count()>0)return e.ar=AssignResult.possible,e.resultString+='The likely assignments include:<br /><span style="font-size: 28px;">',t(),e;r(-.07,.07,-.04,.04);var g=Enumerable.from(e.all).orderBy(u).toArray();return u(g[0])/u(g[1])<=.5&&0!==d.count()?(e.ar=AssignResult.impossible,d=Enumerable.from([g[0]]),e.resultString+='No match. The most possible assignment result is:<br /><span style="font-size: 28px;">',t(),e):(e.ar=AssignResult.error,e.resultString="Invalid input: out of range. Please check your input.",e.result=[],e)}function processOutput(e){for(var r=isMetal(e.pLesser)?.51:e.point[1]+.4,t=e.point[0]-.5,a=e.point[0]+.5,l=getRBMArray(e.pLesser,e.type),n=[],s=[],i=[],o=function(e,r,t){return e>=r&&e<=t||e>=t&&e<=r},p=0;p<l.rbm.length;p++){var u=l.rbm[p],c=void 0;if(2===u.length)c=(u[0][0]-u[1][0])*(r-u[1][1])/(u[0][1]-u[1][1])+u[1][0];else{var h=void 0;h=o(r,u[1][1],u[0][1])?0:2,c=(u[h][0]-u[1][0])*(r-u[1][1])/(u[h][1]-u[1][1])+u[1][0]}o(c,a,t)&&(n.push(l.rbm[p]),s.push(l.rbmLabel[p]),i.push(c))}e.rbm=n,e.rbmLabel=s,e.rbmPos=i;var m=e.all,d=Enumerable.from(m).groupBy(function(e){return 2*e[0]+e[1]},function(e){return e},function(e,r){return{key:e,value:r.orderBy(function(e){return e[0]}).toArray()}});e.all=d.select(function(e){return e.value.map(function(e){return[e[2],e[3]]})}).toArray(),e.allLabel=d.select(function(e){return e.value.map(function(e){return[e[0],e[1]]})}).toArray();var f=e.result;return e.result=f.map(function(e){return[e[2],e[3]]}),e.resultLabel=f.map(function(e){return[e[0],e[1]]}),e.isMetal=isMetal(e.pLesser),e.yAxisLabel="\\("+p1Arr_raw[e.p1Lesser+1]+"-"+p1Arr_raw[e.p1Lesser]+"\\ (\\mathrm{eV})\\)",e.xAxisLabel="\\(("+p1Arr_raw[e.p1Lesser+1]+"+"+p1Arr_raw[e.p1Lesser]+")/2\\ (\\mathrm{eV})\\)",e}function drawPlot(e,r){for(var t=4,a=r.point[0]-.5,l=r.point[0]+.5,n=r.isMetal?-.01:r.point[1]-.4,s=r.isMetal?.45:r.point[1]+.4,i={size:20,lineHeight:20,family:"serif"},o={xaxis:{show:!0,position:"bottom",min:a,max:l,font:i,tickLength:10,tickColor:"rgb(255, 0, 0)",color:"rgb(255, 0, 0)"},yaxis:{show:!0,min:n,max:s,font:i,tickLength:10,tickColor:"rgb(0, 0, 0)",color:"rgb(0, 0, 0)"},series:{hoverable:!0},grid:{borderColor:{top:"rgb(0, 0, 255)",bottom:"rgb(255, 0, 0)",left:"rgb(0, 0, 0)",right:"rgb(0, 0, 0)"},hoverable:!0,minBorderMargin:0}},p=[],u=0;u<r.rbm.length;u++)p.push({color:"rgb(208, 208, 208)",data:r.rbm[u],shadowSize:5,hoverable:!1});for(var c=[1240/785,1240/633,1240/532],h=["rgb(136, 136, 136)","rgb(245, 0, 0)","rgb(12, 127, 15)"],m=0;m<c.length;m++)p=p.concat([{id:"laser"+m.toString(),color:h[m],data:[[-10,2*(-10-c[m])],[10,2*(10-c[m])]],shadowSize:0},{id:"laser_minus"+m.toString(),color:h[m],data:[[-10,-2*(-10-c[m])],[10,-2*(10-c[m])]],shadowSize:0},{fillBetween:"laser"+m.toString(),color:h[m],data:[[-10,2*(-10-(c[m]-.1))],[10,2*(10-(c[m]-.1))]],lines:{fill:.3,lineWidth:0}},{fillBetween:"laser_minus"+m.toString(),color:h[m],data:[[-10,-2*(-10-(c[m]-.1))],[10,-2*(10-(c[m]-.1))]],lines:{fill:.3,lineWidth:0}},{fillBetween:"laser"+m.toString(),color:h[m],data:[[-10,2*(-10-(c[m]+.1))],[10,2*(10-(c[m]+.1))]],lines:{fill:.3,lineWidth:0}},{fillBetween:"laser_minus"+m.toString(),color:h[m],data:[[-10,-2*(-10-(c[m]+.1))],[10,-2*(10-(c[m]+.1))]],lines:{fill:.3,lineWidth:0}}]);for(var d=0;d<r.all.length;d++){var f=(2*r.allLabel[d][0][0]+r.allLabel[d][0][1])%3;p.push({color:r.isMetal||2===f?"rgb(0, 0, 0)":"rgb(255, 0, 0)",data:r.all[d],points:{show:!0,radius:r.isMetal?5.85:t,symbol:r.isMetal?"circle":2===f?"square":"triangle"},lines:{show:!0},point_labels:r.allLabel[d],hoverable:!0})}for(var g=0;g<r.result.length;g++){var v=(2*r.resultLabel[g][0]+r.resultLabel[g][1])%3;p.push({color:r.isMetal||2===v?"rgb(0, 0, 0)":"rgb(255, 0, 0)",data:[r.result[g]],points:{show:!0,radius:r.isMetal?5.85:t,symbol:r.isMetal?"circle":2===v?"square":"triangle",fill:!0,fillColor:r.isMetal||2===v?"rgb(0, 0, 0)":"rgb(255, 0, 0)"},point_labels:[r.resultLabel[g]],hoverable:!0})}"none"!==r.pointType&&p.push({color:"green"===r.pointType?"rgb(12, 180, 15)":"rgb(255, 0, 0)",data:[r.point],points:{show:!0,symbol:"green"===r.pointType?"diamond":"square",radius:t,fill:!0,fillColor:"green"===r.pointType?"rgba(0, 0, 0, 0)":"rgb(255, 0, 0)"},hoverable:!1}),null!==r.bluePoint&&p.push({color:"rgb(0, 0, 255)",data:[r.bluePoint],points:{show:!0,symbol:"diamond",radius:t,fill:!0,fillColor:"rgba(0, 0, 0, 0)"},hoverable:!1,shadowSize:0});var b=$("#"+e),y=$.plot(b,p,o),M=null;if(b.bind("plothover",function(e,r,t){t?M!==t.dataIndex&&(M=t.dataIndex,$("#tooltip").remove(),showTooltip(t.pageX,t.pageY,"("+t.series.point_labels[t.dataIndex][0]+", "+t.series.point_labels[t.dataIndex][1]+")")):($("#tooltip").remove(),M=null)}),r.isMetal)for(var w=0;w<r.all.length;w++){var T=Math.floor(r.all.length/2),S=r.all[w][r.all[w].length-1],_=r.allLabel[w][r.all[w].length-1],P=y.pointOffset({x:S[0],y:S[1]}),x=y.getAxes(),A=x.xaxis,L=x.yaxis;w%2===T%2&&S[0]<=A.max&&S[0]>=A.min&&S[1]<=L.max-.05&&S[1]>=L.min+.05&&b.append("\n                    <div class='series_label' style='left: "+(P.left-(w===T?60:10))+"px; top: "+(P.top-30)+"px;'>\n                        <p>"+(w===T?"2<i>n</i>+<i>m</i>=":"")+(2*_[0]+_[1])+"</p>\n                    </div>\n                ")}else for(var E=Math.round(r.all.length/2),N=r.allLabel[E][r.all[E].length-1],C=Math.floor((2*N[0]+N[1])/3),F=0;F<r.all.length;F++){var B=r.all[F][r.all[F].length-1],R=r.allLabel[F][r.all[F].length-1],k=y.pointOffset({x:B[0],y:B[1]}),D=y.getAxes(),I=D.xaxis,z=D.yaxis,V=Math.round((2*R[0]+R[1])/3),O=(2*R[0]+R[1])%3;if(C%2===V%2&&B[0]<=I.max-.02&&B[0]>=I.min+.02&&B[1]<=z.max-.1&&B[1]>=z.min+.1){var W={color:1===O?"#FF0000":"#000000",left:k.left-(C===V?60:10),top:k.top-(1===O?-15:C===V&&B[1]<=z.max-.15&&B[1]>=z.min+.18?60:30),c1:C===V?(2===O&&B[1]<=z.max-.15?"<b>MOD2</b><br/>":"")+"2<i>n</i>+<i>m</i>=":"",c2:2*R[0]+R[1],c3:C===V&&1===O&&B[1]>=z.min+.12?"<br/><b>MOD1</b>":""};b.append("\n                        <div class='series_label' style='color: "+W.color+"; left: "+W.left+"px; top: "+W.top+"px;'>\n                            <p>"+W.c1+W.c2+W.c3+"</p>\n                        </div>\n                    ")}}for(var q=0;q<r.rbm.length;q++)if(q%2===0||1===r.rbm.length){var j=y.pointOffset({x:r.rbmPos[q],y:s});b.append("\n                <div class='rbm_label' style='left: "+(j.left-15)+"px; top: "+(j.top-30)+"px;'>\n                    <p>"+r.rbmLabel[q]+"</p>\n                </div>\n            ")}}function showTooltip(e,r,t){$("\n        <div id='tooltip' class='tooltip right in'>\n            <div class='tooltip-arrow' style='top: 50%;'></div>\n            <div class='tooltip-inner'>"+t+"</div>\n        </div>\n    ").css({display:"block",top:r,left:e}).appendTo("body").fadeIn(200)}function clearTitle(){$(".bootstrap-select").find("button").removeAttr("title")}function validate(e){var r=$("#hint"),t=function(e){return r.addClass("alert-danger").html('<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> '+e),!1},a=parseInt(e.Val1.value),l=parseInt(e.Val2.value),n=parseInt(e.RBM.value),s=Number(isNaN(a))+Number(isNaN(l))+Number(isNaN(n));return s>=2?t("At least 2 values are required."):!isNaN(a)&&(a<0||a>4)||!isNaN(l)&&(l<0||l>4)||!isNaN(n)&&(n<30||n>500)?t("Please input valid value."):""===$("#slP1").selectpicker("val")?t("Please select the type of transition energy."):($(".selectpicker").removeAttr("disabled"),!0)}function changeEdit(e,r,t){$("#slP1").selectpicker("val",e),$("#slP2").selectpicker("val",e+1),$("#edVal1").val(r),$("#edVal2").val(t)}function calculate(e){var r=parseInt(e.NCalc.value),t=parseInt(e.MCalc.value),a=parseInt(urlParams.Type);if(r<t){var l=[t,r];r=l[0],t=l[1]}if(!(isNaN(r)||isNaN(t)||r<=6||t<=0)){var n=$("<tbody></tbody>");n.append("<tr><td>\\(d_t\\)</td><td>\\( "+Dt(r,t,a).toFixed(3).toString()+" \\ \\mathrm{nm}\\)</td></tr>");var s=0===a,i=function(e){return $("#edRBM").val(e)};if(s){var o=dt2RBM(Dt(r,t,a),isMetal(r,t)?2:0,a).toFixed(1).toString();n.append($("\n                <tr>\n                    <td>\\(\\omega_\\mathrm{RBM}\\ "+(isMetal(r,t)?"(p=3)":"(p=1,2)")+" \\)</td>\n                    <td>\\( "+o+" \\ \\mathrm{cm^{-1}}\\)</td>\n                </tr>\n            ").click(function(){return i(o)}).css("cursor","pointer"))}var p=dt2RBM(Dt(r,t,a),s?3:0,a).toFixed(1).toString();n.append($("\n            <tr>\n                <td>\\(\\omega_\\mathrm{RBM}\\ "+(s?"(p>3)":"")+" \\)</td>\n                <td>\\( "+p+" \\ \\mathrm{cm^{-1}}\\)</td>\n            </tr>\n        ").click(function(){return i(p)}).css("cursor","pointer"));for(var u=[],c=[],h=0;h<12;h++)try{if(isMetal(p1ToP[h])!==isMetal(r,t))continue;var m=getEnergy(Dt(r,t,a),Theta(r,t),p1ToP[h],a,isMetal(r,t)?h%2-1:Mod(r,t)).toFixed(3).toString();u.push(h),c.push(m)}catch(d){}for(var f=function(e){var r=e%2===0?e:e-1;n.append($("<tr><td>"+p1Arr[u[e]]+"</td><td>\\("+c[e]+"\\ \\mathrm{eV}\\)</td></tr>").click(function(){return changeEdit(u[r],c[r],c[r+1])}).css("cursor","pointer"))},g=0;g<u.length;g++)f(g);var v=$("#calcResult");v.html($('<table class="table table-striped math" id="calcResultList"></table>').append(n));for(var b=0;b<u.length;b+=2){var y={type:a,p1:u[b],p2:u[b+1],val1:c[b],val2:c[b+1],rbm:""},M=processOutput(getPlotParams(y)),w="calcPlot"+Math.round(b/2),T="calcPlotContainer"+Math.round(b/2),S=$("#containerTemplate").clone();S.css("display","").attr("id",T),S.find("#plotPlaceholder").attr("id",w),v.append(S),S.find(".yAxisLabel").html(M.yAxisLabel),S.find(".xAxisLabel").html(M.xAxisLabel),S.find(".rbmAxisLabel").html("\\(\\omega_{\\mathrm{RBM}}\\ (\\mathrm{cm^{-1}})\\)"),drawPlot(w,M)}return MathJax.Hub.Queue(["Typeset",MathJax.Hub]),!1}}var AssignResult={accurate:0,possible:1,impossible:2,error:3},typeArr=["Air-suspended SWNTs","SWNTs on \\(\\mathrm{SiO_2}/\\mathrm{Si}\\) substrates","SWNT arrays on quartz substrates",'"Super-growth" SWNTs',"SDS-dispersed SWNTs","ssDNA-dispersed SWNTs"],param=[[1.194,.179,.053],[2.11,.388,.154],[3.17,.764,.286],[4.286,1.23,.412],[5.38,1.922,.644],[6.508,2.768,.928],[7.624,3.768,1.024],[8.734,4.921,1.479],[9.857,6.228,1.692]],betap=[[.09,-.07],[-.18,.14],[-.19,.29],[.49,-.33],[-.43,.59],[-.6,.57]],p1Arr=["\\(S_{11}\\)","\\(S_{22}\\)","\\(M_{11}^-\\)","\\(M_{11}^+\\)","\\(S_{33}\\)","\\(S_{44}\\)","\\(M_{22}^-\\)","\\(M_{22}^+\\)","\\(S_{55}\\)","\\(S_{66}\\)","\\(M_{33}^-\\)","\\(M_{33}^+\\)"],p1Arr_raw=["S_{11}","S_{22}","M_{11}^-","M_{11}^+","S_{33}","S_{44}","M_{22}^-","M_{22}^+","S_{55}","S_{66}","M_{33}^-","M_{33}^+"],p1ToP=[0,1,2,2,3,4,5,5,6,7,8,8],pToLesser=[0,0,2,3,3,5,6,6,9],p1ToLesser=function(e){return e%2===0?e:e-1},Dt=function(e,r,t){return(4!==t?.142:.144)*Math.sqrt(3*(e*e+e*r+r*r))/Math.PI},Theta=function(e,r){return Math.atan(Math.sqrt(3)*r/(2*e+r))},Mod=function(e,r){return(2*e+r)%3},isMetalP=function(e){return(e+1)%3===0},isMetalNM=function(e,r){return 0===Mod(e,r)},isMetal=function(){return 2===arguments.length?isMetalNM(arguments[0],arguments[1]):isMetalP(arguments[0])},getEnergy=function(e,r,t,a,l){return getEnergyFromCos3Theta(e,Math.cos(3*r),t,a,l)},timeLoad=performance.now(),timeStartup=void 0;$.getScript("zh"!==navigator.language.substr(0,2).toLowerCase()?"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js":"https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS_SVG-full,Safe&locale=en",function(){timeStartup=performance.now(),console.log("MathJax load takes "+(timeStartup-timeLoad).toFixed(2))});var urlParams={};(window.onpopstate=function(){var e=void 0,r=/\+/g,t=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(r," "))},l=window.location.search.substring(1);for(urlParams={};e=t.exec(l);)urlParams[a(e[1])]=a(e[2])})(),/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&$(".selectpicker").selectpicker("mobile");var $body=$("body");if($body.hasClass("Step1")){for(var $selectType=$("#slType"),i=0;i<typeArr.length;i++)$selectType.append('<option value="'+i+'">'+typeArr[i]+"</option>");$selectType.selectpicker("val",0).selectpicker("refresh").on("loaded.bs.select",clearTitle).on("changed.bs.select",clearTitle)}if($body.hasClass("Step2")){var type=parseInt(urlParams.Type);(isNaN(type)||type>5||type<0)&&(location.href="Step1.html"),$("#title")[0].innerHTML+="<small>"+typeArr[type]+"</small>",$("#dataTables").find(".type"+type).removeClass("hidden");for(var $selectP1=$("#slP1"),$selectP2=$("#slP2"),_$selectType=$("#slType"),$selectP1P2=$("#slP1, #slP2"),_i=0;_i<p1Arr.length;_i++){if(type>=3){var threshold=3===type?8:2;if(_i>=threshold)break}$selectP1P2.append('<option value="'+_i+'">'+p1Arr[_i]+"</option>")}for(var _i2=0;_i2<typeArr.length;_i2++)_$selectType.append('<option value="'+_i2+'">'+typeArr[_i2]+"</option>");_$selectType.selectpicker("val",type),$(".selectpicker").selectpicker("refresh"),$("select").on("loaded.bs.select",clearTitle),$selectP1.on("changed.bs.select",function(e,r){var t=r-1;clearTitle(),$selectP2.find("option").each(function(){var e=parseInt($(this).val());(t%2===0&&e===t+1||t%2===1&&e===t-1)&&$selectP2.selectpicker("val",e)})})}if($body.hasClass("Step3")){for(var _arr=["Type","P1","P2","Val1","Val2","RBM"],_i3=0;_i3<_arr.length;_i3++){var _i4=_arr[_i3];if(void 0===urlParams[_i4]){location.href="Step1.html";break}}var params={type:parseInt(urlParams.Type),p1:parseInt(urlParams.P1),p2:parseInt(urlParams.P2),val1:urlParams.Val1,val2:urlParams.Val2,rbm:urlParams.RBM},valueBetween=function(e,r,t){return e>=r||e<=t},val1_=parseFloat(params.val1),val2_=parseFloat(params.val2),rbm_=parseFloat(params.rbm),emptyNum=Number(isNaN(val1_))+Number(isNaN(val2_))+Number(isNaN(rbm_));!(emptyNum>=2||isNaN(params.type)||isNaN(params.p1)||isNaN(params.p2)||!isNaN(val1_)&&(val1_<0||val1_>4)||!isNaN(val2_)&&(val2_<0||val2_>4)||!isNaN(rbm_)&&(rbm_<30||rbm_>500))&&valueBetween(params.type,0,5)&&valueBetween(params.p1,0,11)&&valueBetween(params.p2,0,11)||(location.href="Step1.html"),$("#title")[0].innerHTML+="<small>"+typeArr[params.type]+"</small>";var plotParams=processOutput(getPlotParams(params));$("#resultDiv").addClass(plotParams.ar!==AssignResult.error?"alert-success":"alert-danger").html(plotParams.resultString),$("#yAxisLabel").html(plotParams.yAxisLabel),$("#xAxisLabel").html(plotParams.xAxisLabel),$("#"+plotParams.pointType+"Legend").css("display",""),null!==plotParams.bluePoint&&$("#blueLegend").css("display",""),$(drawPlot("plot-placeholder",plotParams))}
//# sourceMappingURL=app.min.js.map
